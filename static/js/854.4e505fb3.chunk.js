"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[854],{6854:function(n,e,t){t.r(e),t.d(e,{default:function(){return D}});var a=t(2982),r=t(2791),d=t(9434),c=t(3868),o=t(9831),i=t(1951),s=t(9085),l=(t(5462),t(8880)),u=function(n){return n.transactions.transactions},m=function(n){return n.transactions.categories},p=function(n){return n.transactions.error},h=function(n){return n.transactions.isTransactionModalOpen},x=t(2142),y=t(885),f=t(5705),j=t(9513),g=t.n(j),v=t(1724),_=(t(8639),"ModalAddTransaction_backdrop__9YaTy"),b="ModalAddTransaction_modal__Ds58Q",C="ModalAddTransaction_modalForm__+xHlN",I="ModalAddTransaction_closeBtn__PD4qb",k="ModalAddTransaction_inactive__XoOqJ",T="ModalAddTransaction_income__9Qunp",A="ModalAddTransaction_expense__FAXIm",E="Transactions_customDateInput__zz46T",M=t(184),N=(0,r.forwardRef)((function(n,e){var t=n.value,a=n.onClick;return(0,M.jsx)("input",{value:t,className:E,onClick:a,onChange:a,ref:e,required:!0})}));function q(){var n=(0,r.useState)(new Date),e=(0,y.Z)(n,2),t=e[0],a=e[1],c=(0,d.I0)();(0,r.useEffect)((function(){c((0,l.CP)())}),[c]),(0,r.useEffect)((function(){var n=function(n){"Escape"===n.code&&c((0,x.$)())};return document.addEventListener("keydown",n),function(){return document.removeEventListener("keydown",n)}}),[c]);var o=(0,d.v9)(m),i=(0,f.TA)({initialValues:{type:!0,amount:"",comment:"",categoryId:""},validationSchema:v.Ry({type:v.Xg().required("Required"),amount:v.Rx().required("Required"),comment:v.Z_().max(40,"40 characters max"),categoryId:v.Z_().required("Required")}),onSubmit:function(n){var e=n.categoryId,a=n.type,r=n.amount,d=n.comment,o={transactionDate:t,comment:d,categoryId:a?e:"063f1132-ba5d-42b4-951d-44011ca46262",amount:a?-1*Number(r):Number(r),type:a?"EXPENSE":"INCOME"};c((0,l.dT)(o)),c((0,x.$)())}}),s=i.handleChange,u=i.handleSubmit,p=i.values,h=i.errors,j=i.touched;return(0,M.jsx)("div",{className:_,onClick:function(n){n.target===n.currentTarget&&c((0,x.$)())},children:(0,M.jsxs)("div",{className:b,children:[(0,M.jsx)("button",{className:I,onClick:function(){return c((0,x.$)())},type:"button","aria-label":"close button",children:"X"}),(0,M.jsxs)("form",{className:C,onSubmit:u,children:[(0,M.jsx)("h2",{children:"Add transaction"}),(0,M.jsx)("span",{className:p.type?k:T,children:"Income"}),(0,M.jsx)("input",{name:"type",type:"checkbox",checked:p.type,onChange:s}),(0,M.jsx)("span",{className:p.type?A:k,children:"Expense"}),p.type&&(0,M.jsxs)("select",{name:"categoryId",value:p.categoryId,onChange:s,required:!0,children:[(0,M.jsx)("option",{value:"",disabled:!0,hidden:!0,children:"Select your option"}),o.map((function(n){return"EXPENSE"===n.type?(0,M.jsx)("option",{value:n.id,children:n.name},n.id):null}))]}),j.categoryId&&h.categoryId?(0,M.jsx)("div",{children:h.categoryId}):null,(0,M.jsx)("input",{name:"amount",type:"text",placeholder:"0.00",value:p.amount,onChange:s,required:!0}),j.amount&&h.amount?(0,M.jsx)("div",{children:h.amount}):null,(0,M.jsx)(g(),{selected:t,dateFormat:"dd.MM.yyyy",calendarStartDay:1,onChange:function(n){a(n)},customInput:(0,M.jsx)(N,{})}),(0,M.jsx)("input",{name:"comment",type:"text",placeholder:"Your comment",value:p.comment,onChange:s}),j.comment&&h.comment?(0,M.jsx)("div",{children:h.comment}):null,(0,M.jsxs)("div",{children:[(0,M.jsx)("button",{type:"submit",children:"Add"}),(0,M.jsx)("button",{type:"button",onClick:function(){return c((0,x.$)())},children:"Cancel"})]})]})]})})}var D=function(){var n=(0,d.v9)(h),e=(0,d.v9)(m),t=(0,d.v9)(u),y=(0,d.v9)(p),f=(0,d.I0)(),j=(0,a.Z)(t).sort((function(n,e){return(0,c.Z)((0,o.default)(n.transactionDate),(0,o.default)(e.transactionDate))}));return(0,r.useEffect)((function(){f((0,l.f1)()),f((0,l.CP)())}),[f]),y&&s.Am.error(y),(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("table",{children:[(0,M.jsx)("thead",{children:(0,M.jsxs)("tr",{children:[(0,M.jsx)("th",{style:{padding:"5px"},children:"Date"}),(0,M.jsx)("th",{style:{padding:"5px"},children:"Type"}),(0,M.jsx)("th",{style:{padding:"5px"},children:"Category"}),(0,M.jsx)("th",{style:{padding:"5px"},children:"Comment"}),(0,M.jsx)("th",{style:{padding:"5px"},children:"Sum"}),(0,M.jsx)("th",{style:{padding:"5px"},children:"Balance"})]})}),(0,M.jsx)("tbody",{children:j.map((function(n){var t,a=n.id,r=n.transactionDate,d=n.type,c=n.categoryId,s=n.comment,l=n.amount,u=n.balanceAfter;return(0,M.jsxs)("tr",{children:[(0,M.jsx)("td",{style:{padding:"5px"},children:(0,i.default)((0,o.default)(r),"dd.MM.yyyy")}),(0,M.jsx)("td",{style:{padding:"5px"},children:d}),(0,M.jsx)("td",{style:{padding:"5px"},children:null===(t=e.find((function(n){return n.id===c})))||void 0===t?void 0:t.name}),(0,M.jsx)("td",{style:{padding:"5px"},children:s}),(0,M.jsx)("td",{style:{padding:"5px"},children:Math.abs(l)}),(0,M.jsx)("td",{style:{padding:"5px"},children:u})]},a)}))})]}),(0,M.jsx)("button",{type:"button","aria-label":"add transaction button",onClick:function(){return f((0,x.$)())},children:"Add Transaction"}),n&&(0,M.jsx)(q,{}),(0,M.jsx)(s.Ix,{})]})}}}]);
//# sourceMappingURL=854.4e505fb3.chunk.js.map