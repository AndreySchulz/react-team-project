"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[981],{3981:function(a,t,e){e.r(t),e.d(t,{default:function(){return W}});var n=e(2982),s=e(2791),c=e(9434),o=e(3868),r=e(9831),d=e(1951),l=e(9085),i=(e(5462),e(8880)),_=function(a){return a.transactions.transactions},u=function(a){return a.transactions.categories},m=function(a){return a.transactions.error},h=function(a){return a.transactions.isTransactionModalOpen},b=e(2142),T=e(885),x=e(5705),p=e(9513),D=e.n(p),f=e(1724),j=(e(8639),"ModalAddTransaction_backdrop__9YaTy"),y="ModalAddTransaction_modal__Ds58Q",g="ModalAddTransaction_modalForm__+xHlN",v="ModalAddTransaction_closeBtn__PD4qb",N="ModalAddTransaction_modalTitle__5uy28",M="ModalAddTransaction_typeWrapper__zr9tr",A="ModalAddTransaction_typeCheckbox__5CM5W",I="ModalAddTransaction_customCheckbox__Lusq4",C="ModalAddTransaction_inactive__XoOqJ",k="ModalAddTransaction_income__9Qunp ModalAddTransaction_inactive__XoOqJ",E="ModalAddTransaction_expense__FAXIm ModalAddTransaction_inactive__XoOqJ",R="ModalAddTransaction_typeLabel__xzRI4",H="ModalAddTransaction_select__WguZ7",S="ModalAddTransaction_selectPlaceholder__-fYb-",q="ModalAddTransaction_amountAndDate__k5cLR",w="ModalAddTransaction_amountInput__qwGJd ModalAddTransaction_amountAndDateInputs__8QD0+",B="ModalAddTransaction_customDateInput__9YfM0 ModalAddTransaction_amountAndDateInputs__8QD0+",X="ModalAddTransaction_calendarIcon__L3BwY",L="ModalAddTransaction_commentInput__h66RA",O="ModalAddTransaction_btnWrapper__FnKSr",Q="ModalAddTransaction_addBtn__73b0r",Z="ModalAddTransaction_cancelBtn__Cun97 ModalAddTransaction_addBtn__73b0r";var P=e.p+"static/media/transactionSprite.f81084fa89e2f71405e24f42db60dd15.svg",Y=e(184),$=(0,s.forwardRef)((function(a,t){var e=a.value,n=a.onClick;return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)("input",{value:e,className:B,onClick:n,onChange:n,ref:t,required:!0}),(0,Y.jsx)("svg",{className:X,width:18,height:20,onClick:n,children:(0,Y.jsx)("use",{href:P+"#icon-calendar"})})]})}));function F(){var a=(0,s.useState)(new Date),t=(0,T.Z)(a,2),e=t[0],n=t[1],o=(0,c.I0)();(0,s.useEffect)((function(){o((0,i.CP)())}),[o]),(0,s.useEffect)((function(){var a=function(a){"Escape"===a.code&&o((0,b.$)())};return document.addEventListener("keydown",a),function(){return document.removeEventListener("keydown",a)}}),[o]);var r=(0,c.v9)(u),d=(0,x.TA)({initialValues:{type:!0,amount:"",comment:"",categoryId:""},validationSchema:f.Ry({type:f.Xg(),amount:f.Rx().required("Required"),comment:f.Z_().max(40,"40 characters max"),categoryId:f.Z_().required("Required")}),onSubmit:function(a){var t=a.categoryId,n=a.type,s=a.amount,c=a.comment,r={transactionDate:e,comment:c,categoryId:n?t:"063f1132-ba5d-42b4-951d-44011ca46262",amount:n?-1*Number(s):Number(s),type:n?"EXPENSE":"INCOME"};o((0,i.dT)(r)),o((0,b.$)())}}),l=d.handleChange,_=d.handleSubmit,m=d.values,h=d.errors,p=d.touched;return(0,Y.jsx)("div",{className:j,onClick:function(a){a.target===a.currentTarget&&o((0,b.$)())},children:(0,Y.jsxs)("div",{className:y,children:[(0,Y.jsx)("button",{className:v,onClick:function(){return o((0,b.$)())},type:"button","aria-label":"close button"}),(0,Y.jsxs)("form",{className:g,onSubmit:_,children:[(0,Y.jsx)("h2",{className:N,children:"Add transaction"}),(0,Y.jsxs)("div",{className:M,children:[(0,Y.jsx)("div",{className:m.type?C:k,children:"Income"}),(0,Y.jsxs)("label",{className:R,children:[(0,Y.jsx)("input",{className:A,name:"type",type:"checkbox",checked:m.type,onChange:l}),(0,Y.jsx)("div",{className:I})]}),(0,Y.jsx)("div",{className:m.type?E:C,children:"Expense"})]}),m.type&&(0,Y.jsxs)("select",{className:H,name:"categoryId",value:m.categoryId,onChange:l,required:!0,children:[(0,Y.jsx)("option",{className:S,value:"",disabled:!0,hidden:!0,children:"Select your option"}),r.map((function(a){return"EXPENSE"===a.type?(0,Y.jsx)("option",{value:a.id,children:a.name},a.id):null}))]}),p.categoryId&&h.categoryId?(0,Y.jsx)("div",{children:h.categoryId}):null,(0,Y.jsxs)("div",{className:q,children:[(0,Y.jsx)("input",{className:w,name:"amount",type:"text",placeholder:"0.00",value:m.amount,onChange:l,required:!0}),p.amount&&h.amount?(0,Y.jsx)("div",{children:h.amount}):null,(0,Y.jsx)(D(),{selected:e,dateFormat:"dd.MM.yyyy",calendarStartDay:1,onChange:n,customInput:(0,Y.jsx)($,{})})]}),(0,Y.jsx)("input",{className:L,name:"comment",type:"text",placeholder:"Comment",value:m.comment,onChange:l}),p.comment&&h.comment?(0,Y.jsx)("div",{children:h.comment}):null,(0,Y.jsxs)("div",{className:O,children:[(0,Y.jsx)("button",{className:Q,type:"submit",children:"Add"}),(0,Y.jsx)("button",{className:Z,type:"button",onClick:function(){return o((0,b.$)())},children:"Cancel"})]})]})]})})}var J={transactions:"Transactions_transactions__71ga-",transactionsTable:"Transactions_transactionsTable__dtPaD",tableHeader:"Transactions_tableHeader__Cpqjv",tableHeaderData:"Transactions_tableHeaderData__mZexS",tableHeaderDataRight:"Transactions_tableHeaderDataRight__gujHp Transactions_tableHeaderData__mZexS",tableBody:"Transactions_tableBody__mnCJO",tableData:"Transactions_tableData__i3g3I",firstTableData:"Transactions_firstTableData__hSLhT",lastTableData:"Transactions_lastTableData__YuN01",tableDataRight:"Transactions_tableDataRight__k5pQt Transactions_tableData__i3g3I",tableDataIncome:"Transactions_tableDataIncome__YKGXQ Transactions_tableDataRight__k5pQt Transactions_tableData__i3g3I",tableDataExpense:"Transactions_tableDataExpense__X6kvt Transactions_tableDataRight__k5pQt Transactions_tableData__i3g3I",addButton:"Transactions_addButton__cRmgL"},W=function(){var a=(0,c.v9)(h),t=(0,c.v9)(u),e=(0,c.v9)(_),T=(0,c.v9)(m),x=(0,c.I0)();(0,s.useEffect)((function(){x((0,i.CP)())}),[x]);var p=(0,n.Z)(e).sort((function(a,t){return(0,o.Z)((0,r.default)(a.transactionDate),(0,r.default)(t.transactionDate))}));return T&&l.Am.error(T),(0,Y.jsxs)("section",{className:J.transactions,children:[(0,Y.jsxs)("table",{className:J.transactionsTable,children:[(0,Y.jsx)("thead",{className:J.tableHeader,children:(0,Y.jsxs)("tr",{className:J.tableHeaderRow,children:[(0,Y.jsx)("th",{className:J.tableHeaderData,children:"Date"}),(0,Y.jsx)("th",{className:J.tableHeaderData,children:"Type"}),(0,Y.jsx)("th",{className:J.tableHeaderData,children:"Category"}),(0,Y.jsx)("th",{className:J.tableHeaderData,children:"Comment"}),(0,Y.jsx)("th",{className:J.tableHeaderDataRight,children:"Sum"}),(0,Y.jsx)("th",{className:J.tableHeaderDataRight,children:"Balance"})]})}),(0,Y.jsx)("tbody",{className:J.tableBody,children:p.map((function(a,e,n){var s,c=a.id,o=a.transactionDate,l=a.type,i=a.categoryId,_=a.comment,u=a.amount,m=a.balanceAfter;return(0,Y.jsxs)("tr",{children:[(0,Y.jsx)("td",{className:"".concat(J.tableData," ").concat(0===e&&J.firstTableData," ").concat(e===n.length-1&&J.lastTableData),children:(0,d.default)((0,r.default)(o),"dd.MM.yyyy")}),(0,Y.jsx)("td",{className:"".concat(J.tableData," ").concat(0===e&&J.firstTableData," ").concat(e===n.length-1&&J.lastTableData),children:"INCOME"===l?"+":"-"}),(0,Y.jsx)("td",{className:"".concat(J.tableData," ").concat(0===e&&J.firstTableData," ").concat(e===n.length-1&&J.lastTableData),children:null===(s=t.find((function(a){return a.id===i})))||void 0===s?void 0:s.name}),(0,Y.jsx)("td",{className:"".concat(J.tableData," ").concat(0===e&&J.firstTableData," ").concat(e===n.length-1&&J.lastTableData),children:_}),(0,Y.jsx)("td",{className:"".concat("INCOME"===l?J.tableDataIncome:J.tableDataExpense," ").concat(0===e&&J.firstTableData," ").concat(e===n.length-1&&J.lastTableData),children:Math.abs(u)}),(0,Y.jsx)("td",{className:"".concat(J.tableDataRight," ").concat(0===e&&J.firstTableData," ").concat(e===n.length-1&&J.lastTableData),children:m})]},c)}))})]}),(0,Y.jsx)("button",{type:"button",className:J.addButton,"aria-label":"add transaction button",onClick:function(){return x((0,b.$)())},children:(0,Y.jsx)("svg",{width:20,height:20,children:(0,Y.jsx)("use",{href:P+"#icon-plus"})})}),a&&(0,Y.jsx)(F,{}),(0,Y.jsx)(l.Ix,{})]})}}}]);
//# sourceMappingURL=981.a3a65f53.chunk.js.map