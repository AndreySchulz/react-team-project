"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[218,54],{3779:function(a,n,t){t(2791);n.Z=t.p+"static/media/transactionSprite.39e4ce06c63f00d03dae5b603deee49f.svg"},1218:function(a,n,t){t.r(n),t.d(n,{default:function(){return na}});var e=t(2982),s=t(885),r=t(2791),c=t(9434),o=t(3868),i=t(9831),l=t(1951),d=t(9085),u=(t(5462),t(5607)),m=t(8880),h=t(9104),_=t(5705),f=t(9513),x=t.n(f),p=t(2142),b=t(1724),v=(t(8639),"ModalAddTransaction_backdrop__9YaTy"),j="ModalAddTransaction_modal__Ds58Q",g="ModalAddTransaction_modalForm__+xHlN",T="ModalAddTransaction_closeBtn__PD4qb",N="ModalAddTransaction_modalTitle__5uy28",D="ModalAddTransaction_typeWrapper__zr9tr",y="ModalAddTransaction_typeCheckbox__5CM5W",I="ModalAddTransaction_customCheckbox__Lusq4",C="ModalAddTransaction_inactive__XoOqJ",Z="ModalAddTransaction_income__9Qunp ModalAddTransaction_inactive__XoOqJ",M="ModalAddTransaction_expense__FAXIm ModalAddTransaction_inactive__XoOqJ",E="ModalAddTransaction_typeLabel__xzRI4",w="ModalAddTransaction_amountAndDate__k5cLR",A="ModalAddTransaction_amountInput__qwGJd ModalAddTransaction_amountAndDateInputs__8QD0+",k="ModalAddTransaction_customDateInput__9YfM0 ModalAddTransaction_amountAndDateInputs__8QD0+",R="ModalAddTransaction_calendarIcon__L3BwY",B="ModalAddTransaction_commentInput__h66RA",S="ModalAddTransaction_btnWrapper__FnKSr",H="ModalAddTransaction_addBtn__73b0r",O="ModalAddTransaction_cancelBtn__Cun97 ModalAddTransaction_addBtn__73b0r",q="ModalAddTransaction_chevron__rQ39W",F="ModalAddTransaction_chevronTurn__B5KZn ModalAddTransaction_chevron__rQ39W",L="ModalAddTransaction_validatoinError__n9wAp",W=t(3779),X=t(184),Q=(0,r.forwardRef)((function(a,n){var t=a.value,e=a.onClick;return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("input",{value:t,className:k,onClick:e,onChange:e,ref:n,required:!0}),(0,X.jsx)("svg",{className:R,width:18,height:20,onClick:e,children:(0,X.jsx)("use",{href:W.Z+"#icon-calendar"})})]})})),P=t(1413),Y=t(5930),z=function(a){var n=a.selectProps;return(0,X.jsx)("div",{className:n.menuIsOpen?F:q})},K={control:function(){return{display:"flex",alignItems:"center",border:"none",borderRadius:"0",borderBottom:"1px solid #E0E0E0",padding:"8px",marginBottom:"40px",outline:"none",fontSize:"18px",lineHeight:"1.5",paddingLeft:"20px",":hover":{backgroundColor:"#ff659614"}}},placeholder:function(a){return(0,P.Z)((0,P.Z)({},a),{},{color:"#BDBDBD"})},option:function(a,n){var t=n.isFocused;return(0,P.Z)((0,P.Z)({},a),{},{backgroundColor:t&&"#fff",fontWeight:t&&"700",color:t&&"#FF6596",padding:"14px 0 17px"})},menu:function(a){return(0,P.Z)((0,P.Z)({},a),{},{fontSize:"18px",width:"100%",lineHeight:1.5,paddingLeft:"20px",backgroundColor:"#FFFFFFB2",backdropFilter:"blur(25px)",boxShadow:"0px 6px 15px rgba(0, 0, 0, 0.1)",borderRadius:"20px"})}};function V(a){var n=a.setCategoryId,t=(0,c.v9)(h.us).filter((function(a){return"EXPENSE"===a.type})).map((function(a){return{value:a.id,label:a.name}}));return(0,X.jsx)(Y.ZP,{options:t,onChange:function(a){return n(a.value)},placeholder:"Select a category",styles:K,unstyled:!0,components:{DropdownIndicator:z},required:!0})}var J=t(4164);function U(a){var n=a.editModalOpen,t=a.setEditModalOpen,e=a.transactionID,o=(0,r.useState)(new Date),i=(0,s.Z)(o,2),l=i[0],d=i[1],u=(0,r.useState)(""),f=(0,s.Z)(u,2),k=f[0],R=f[1],q=(0,c.v9)(h.ig),F=(0,c.I0)(),W=q.find((function(a){return a.id===e}));(0,r.useEffect)((function(){F((0,m.CP)())}),[F]);var P=(0,r.useCallback)((function(){F((0,p.$)()),t(!1),F((0,m.f1)())}),[F,t]);(0,r.useEffect)((function(){var a=function(a){"Escape"===a.code&&P()};return document.addEventListener("keydown",a),function(){return document.removeEventListener("keydown",a)}}),[F,P]);var Y=(0,_.TA)({initialValues:{type:!n||"EXPENSE"===W.type,amount:n?Math.abs(W.amount):"",comment:n?W.comment:""},validationSchema:b.Ry({type:b.Xg(),amount:b.Rx().required("*Required"),comment:b.Z_().max(40,"40 characters max")}),onSubmit:function(a){var t=a.type,s=a.amount,r=a.comment,c={transactionDate:l,comment:r,categoryId:t?k:"063f1132-ba5d-42b4-951d-44011ca46262",amount:t?-1*Number(s):Number(s),type:t?"EXPENSE":"INCOME"};F(n?(0,m.vF)({transactionID:e,newTransaction:c}):(0,m.dT)(c)),P()}}),z=Y.handleChange,K=Y.handleSubmit,U=Y.values,G=Y.errors,$=Y.touched;return(0,J.createPortal)((0,X.jsx)("div",{className:v,onClick:function(a){a.target===a.currentTarget&&P()},children:(0,X.jsxs)("div",{className:j,children:[(0,X.jsx)("button",{className:T,onClick:P,type:"button","aria-label":"close button"}),(0,X.jsxs)("form",{className:g,onSubmit:K,children:[(0,X.jsx)("h2",{className:N,children:n?"Edit Transaction":"Add transaction"}),(0,X.jsxs)("div",{className:D,children:[(0,X.jsx)("div",{className:U.type?C:Z,children:"Income"}),(0,X.jsxs)("label",{className:E,children:[(0,X.jsx)("input",{className:y,name:"type",type:"checkbox",checked:U.type,onChange:z}),(0,X.jsx)("div",{className:I})]}),(0,X.jsx)("div",{className:U.type?M:C,children:"Expense"})]}),U.type&&(0,X.jsx)(V,{setCategoryId:R}),$.categoryId&&G.categoryId?(0,X.jsx)("div",{className:L,children:G.categoryId}):null,(0,X.jsxs)("div",{className:w,children:[(0,X.jsx)("input",{className:A,name:"amount",type:"number",placeholder:"0.00",value:U.amount,onChange:z,required:!0}),$.amount&&G.amount?(0,X.jsx)("div",{className:L,children:G.amount}):null,(0,X.jsx)(x(),{selected:l,dateFormat:"dd.MM.yyyy",calendarStartDay:1,onChange:d,customInput:(0,X.jsx)(Q,{})})]}),(0,X.jsx)("textarea",{className:B,name:"comment",type:"text",placeholder:"Comment",value:U.comment,onChange:z}),$.comment&&G.comment?(0,X.jsx)("div",{className:L,children:G.comment}):null,(0,X.jsxs)("div",{className:S,children:[(0,X.jsx)("button",{className:H,type:"submit",children:n?"Edit":"Add"}),(0,X.jsx)("button",{className:O,type:"button",onClick:P,children:"Cancel"})]})]})]})}),document.querySelector("#modal-root"))}var G={transactions:"Transactions_transactions__71ga-",transactionsTable:"Transactions_transactionsTable__dtPaD",tableHeaderData:"Transactions_tableHeaderData__mZexS",tableHeaderDataRight:"Transactions_tableHeaderDataRight__gujHp Transactions_tableHeaderData__mZexS",tableBody:"Transactions_tableBody__mnCJO",tableData:"Transactions_tableData__i3g3I",firstTableData:"Transactions_firstTableData__hSLhT",lastTableData:"Transactions_lastTableData__YuN01",tableDataRight:"Transactions_tableDataRight__k5pQt Transactions_tableData__i3g3I",tableDataIncome:"Transactions_tableDataIncome__YKGXQ Transactions_tableDataRight__k5pQt Transactions_tableData__i3g3I",tableDataExpense:"Transactions_tableDataExpense__X6kvt Transactions_tableDataRight__k5pQt Transactions_tableData__i3g3I",editBtn:"Transactions_editBtn__Cgz7S",editBtnIcon:"Transactions_editBtnIcon__i3WDp",mobTransaction:"Transactions_mobTransaction__yseD9",transactionRowIncome:"Transactions_transactionRowIncome__byqUX",transactionRowExpense:"Transactions_transactionRowExpense__Zo5ej Transactions_transactionRowIncome__byqUX",transactionHeader:"Transactions_transactionHeader__VeVKT",transactionData:"Transactions_transactionData__E0V3h",transactionDataIncome:"Transactions_transactionDataIncome__Ngq-x Transactions_transactionData__E0V3h",transactionDataExpense:"Transactions_transactionDataExpense__UjAqw Transactions_transactionData__E0V3h"},$=t(1054),aa="";var na=function(){var a,n=(0,r.useState)(!1),t=(0,s.Z)(n,2),_=t[0],f=t[1],x=(0,r.useState)([]),b=(0,s.Z)(x,2),v=b[0],j=b[1],g=(0,c.v9)(h.Yh),T=(0,c.v9)(h.us),N=(0,c.v9)(h.ig),D=(0,c.v9)(h.zh),y=(0,c.I0)(),I=(0,r.useState)(!1),C=(0,s.Z)(I,2),Z=C[0],M=C[1];function E(a){var n="incr"===a.currentTarget.dataset.flag;if("Sum"===(null===a||void 0===a?void 0:a.target.textContent)){if(n)return j((function(a){return(0,e.Z)(a).sort((function(a,n){return Math.abs(n.amount)-Math.abs(a.amount)}))})),void(a.currentTarget.dataset.flag="decr");j((function(a){return(0,e.Z)(a).sort((function(a,n){return Math.abs(a.amount)-Math.abs(n.amount)}))})),a.currentTarget.dataset.flag="incr"}if("Date"===(null===a||void 0===a?void 0:a.target.textContent)){if(n)return j((function(a){return(0,e.Z)(a).sort((function(a,n){return(0,o.Z)((0,i.default)(n.transactionDate),(0,i.default)(a.transactionDate))}))})),void(a.currentTarget.dataset.flag="decr");j((function(a){return(0,e.Z)(a).sort((function(a,n){return(0,o.Z)((0,i.default)(a.transactionDate),(0,i.default)(n.transactionDate))}))})),a.currentTarget.dataset.flag="incr"}if("Type"===(null===a||void 0===a?void 0:a.target.textContent)){if(n)return j((function(a){return(0,e.Z)(a).sort((function(a,n){return n.type.localeCompare(a.type)}))})),void(a.currentTarget.dataset.flag="decr");j((function(a){return(0,e.Z)(a).sort((function(a,n){return a.type.localeCompare(n.type)}))})),a.currentTarget.dataset.flag="incr"}if("Category"===(null===a||void 0===a?void 0:a.target.textContent)){if(n)return j((function(a){return(0,e.Z)(a).sort((function(a,n){var t,e;return null===(t=T.find((function(a){return a.id===n.categoryId})))||void 0===t?void 0:t.name.localeCompare(null===(e=T.find((function(n){return n.id===a.categoryId})))||void 0===e?void 0:e.name)}))})),void(a.currentTarget.dataset.flag="decr");j((function(a){return(0,e.Z)(a).sort((function(a,n){var t,e;return null===(t=T.find((function(n){return n.id===a.categoryId})))||void 0===t?void 0:t.name.localeCompare(null===(e=T.find((function(a){return a.id===n.categoryId})))||void 0===e?void 0:e.name)}))})),a.currentTarget.dataset.flag="incr"}if("Balance"===(null===a||void 0===a?void 0:a.target.textContent)){if(n)return j((function(a){return(0,e.Z)(a).sort((function(a,n){return n.balanceAfter-a.balanceAfter}))})),void(a.currentTarget.dataset.flag="decr");j((function(a){return(0,e.Z)(a).sort((function(a,n){return a.balanceAfter-n.balanceAfter}))})),a.currentTarget.dataset.flag="incr"}}return window.matchMedia("(max-width: 767px)").addEventListener("change",(function(a){a.matches?M(!0):M(!1)})),(0,r.useEffect)((function(){y((0,m.CP)()),j((0,e.Z)(N).reverse().sort((function(a,n){return(0,o.Z)((0,i.default)(a.transactionDate),(0,i.default)(n.transactionDate))})))}),[y,N]),D&&d.Am.error(D),Z&&(a=g,document.body.style.overflow=a?"hidden":"visible"),(0,X.jsxs)("section",{className:G.transactions,children:[(0,X.jsx)(u.Z,{queries:$.mediaQueries,children:function(a){return a.mobile||a.response?(0,X.jsx)("ul",{children:v.map((function(a){var n,t=a.id,e=a.transactionDate,s=a.type,r=a.categoryId,c=a.comment,o=a.amount,d=a.balanceAfter;return(0,X.jsxs)("li",{className:G.mobTransaction,children:[(0,X.jsxs)("div",{className:"INCOME"===s?G.transactionRowIncome:G.transactionRowExpense,children:[(0,X.jsx)("p",{className:G.transactionHeader,children:"Date"}),(0,X.jsx)("p",{className:G.transactionData,children:(0,l.default)((0,i.default)(e),"dd.MM.yyyy")})]}),(0,X.jsxs)("div",{className:"INCOME"===s?G.transactionRowIncome:G.transactionRowExpense,children:[(0,X.jsx)("p",{className:G.transactionHeader,children:"Type"}),(0,X.jsx)("p",{className:G.transactionData,children:"INCOME"===s?"+":"-"})]}),(0,X.jsxs)("div",{className:"INCOME"===s?G.transactionRowIncome:G.transactionRowExpense,children:[(0,X.jsx)("p",{className:G.transactionHeader,children:"Category"}),(0,X.jsx)("p",{className:G.transactionData,children:null===(n=T.find((function(a){return a.id===r})))||void 0===n?void 0:n.name})]}),(0,X.jsxs)("div",{className:"INCOME"===s?G.transactionRowIncome:G.transactionRowExpense,children:[(0,X.jsx)("p",{className:G.transactionHeader,children:"Comment"}),(0,X.jsx)("p",{className:G.transactionData,children:c})]}),(0,X.jsxs)("div",{className:"INCOME"===s?G.transactionRowIncome:G.transactionRowExpense,children:[(0,X.jsx)("p",{className:G.transactionHeader,children:"Sum"}),(0,X.jsx)("p",{className:"INCOME"===s?G.transactionDataIncome:G.transactionDataExpense,children:Math.abs(o)})]}),(0,X.jsxs)("div",{className:"INCOME"===s?G.transactionRowIncome:G.transactionRowExpense,children:[(0,X.jsx)("p",{className:G.transactionHeader,children:"Balance"}),(0,X.jsx)("p",{className:G.transactionData,children:d})]})]},t)}))}):(0,X.jsxs)("table",{className:G.transactionsTable,children:[(0,X.jsx)("thead",{children:(0,X.jsxs)("tr",{className:G.tableHeaderRow,children:[(0,X.jsx)("th",{className:G.tableHeaderData,onClick:E,"data-flag":"incr",children:"Date"}),(0,X.jsx)("th",{className:G.tableHeaderData,onClick:E,"data-flag":"incr",children:"Type"}),(0,X.jsx)("th",{className:G.tableHeaderData,onClick:function(a){return E(a)},"data-flag":"incr",children:"Category"}),(0,X.jsx)("th",{className:G.tableHeaderData,children:"Comment"}),(0,X.jsx)("th",{className:G.tableHeaderDataRight,"data-flag":"incr",onClick:E,children:"Sum"}),(0,X.jsx)("th",{className:G.tableHeaderDataRight,"data-flag":"incr",onClick:E,children:"Balance"}),(0,X.jsx)("th",{className:G.tableHeaderDataRight,children:"Edit"})]})}),(0,X.jsx)("tbody",{className:G.tableBody,children:v.map((function(a,n,t){var e,s=a.id,r=a.transactionDate,c=a.type,o=a.categoryId,d=a.comment,u=a.amount,h=a.balanceAfter;return(0,X.jsxs)("tr",{children:[(0,X.jsx)("td",{className:"".concat(G.tableData," ").concat(0===n?G.firstTableData:""," ").concat(n===t.length-1?G.lastTableData:""),children:(0,l.default)((0,i.default)(r),"dd.MM.yyyy")}),(0,X.jsx)("td",{className:"".concat(G.tableData," ").concat(0===n?G.firstTableData:""," ").concat(n===t.length-1?G.lastTableData:""),children:"INCOME"===c?"+":"-"}),(0,X.jsx)("td",{className:"".concat(G.tableData," ").concat(0===n?G.firstTableData:""," ").concat(n===t.length-1?G.lastTableData:""),children:null===(e=T.find((function(a){return a.id===o})))||void 0===e?void 0:e.name}),(0,X.jsx)("td",{className:"".concat(G.tableData," ").concat(0===n?G.firstTableData:""," ").concat(n===t.length-1?G.lastTableData:""),children:d}),(0,X.jsx)("td",{className:"".concat("INCOME"===c?G.tableDataIncome:G.tableDataExpense," ").concat(0===n?G.firstTableData:""," ").concat(n===t.length-1?G.lastTableData:""),children:Math.abs(u)}),(0,X.jsx)("td",{className:"".concat(G.tableDataRight," ").concat(0===n?G.firstTableData:""," ").concat(n===t.length-1?G.lastTableData:""),children:h}),(0,X.jsxs)("td",{className:"".concat(G.tableDataRight," ").concat(0===n?G.firstTableData:""," ").concat(n===t.length-1?G.lastTableData:""),children:[(0,X.jsx)("button",{className:G.editBtn,onClick:function(){aa=s,y((0,p.$)()),f(!0)},type:"button",children:(0,X.jsx)("svg",{className:G.editBtnIcon,width:15,height:15,children:(0,X.jsx)("use",{href:"".concat(W.Z,"#icon-pencil")})})}),(0,X.jsx)("button",{className:G.editBtn,onClick:function(){return function(a){y((0,m.Ks)(a)),y((0,m.f1)())}(s)},type:"button",children:(0,X.jsx)("svg",{className:G.editBtnIcon,width:15,height:15,children:(0,X.jsx)("use",{href:"".concat(W.Z,"#icon-bin")})})})]})]},s)}))})]})}}),g&&(0,X.jsx)(U,{editModalOpen:_,setEditModalOpen:f,transactionID:aa}),(0,X.jsx)(d.Ix,{})]})}},1054:function(a,n,t){t.r(n),t.d(n,{default:function(){return C},mediaQueries:function(){return I}});var e=t(2791),s=t(1087),r=t(7689),c=t(9143),o=t(885),i=t(9434),l=t(9104),d=t(3699),u="Balance_card__N1Gq1",m="Balance_title__Xono1",h="Balance_result__0KQXr",_=t(7382),f=t(184),x=function(){var a=(0,i.v9)(d.i4),n=(0,i.v9)(l.ig),t=(0,e.useState)(a),s=(0,o.Z)(t,2),r=s[0],c=s[1],x=(0,i.I0)();return(0,e.useEffect)((function(){x((0,_.refreshBalance)())}),[n]),(0,e.useEffect)((function(){c(a)}),[a]),(0,f.jsxs)("div",{className:u,children:[(0,f.jsx)("p",{className:m,children:"Your balance"}),(0,f.jsxs)("p",{className:h,children:["\u20b4 ",r]})]})},p=t(5607),b=t(3884),v={container:"Wallet_container__dUf7n",balance:"Wallet_balance__IfjY6",navigation:"Wallet_navigation__bohIM",content:"Wallet_content__r+Au2",bar:"Wallet_bar__OhCIc"},j=t(1209),g=t(8880),T=t(2142),N="AddTransactionBtn_addButton__8-dbh",D=t(3779);function y(){var a=(0,i.I0)();return(0,f.jsx)("button",{type:"button",className:N,"aria-label":"add transaction button",onClick:function(){return a((0,T.$)())},children:(0,f.jsx)("svg",{width:20,height:20,children:(0,f.jsx)("use",{href:D.Z+"#icon-plus"})})})}var I={response:"(max-width: 479px)",mobile:"(min-width: 480px) and (max-width: 767px)",tablet:"(min-width: 768px) and (max-width: 1279px)",desktop:"(min-width: 1280px)"},C=function(){var a=(0,i.v9)(l.Yh),n=(0,i.I0)();(0,e.useEffect)((function(){n((0,g.f1)())}),[n]);var t=(0,r.TH)().pathname,o="/wallet/home"===t;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("section",{className:v.container,children:[(0,f.jsxs)("div",{className:v.bar,children:[(0,f.jsxs)("div",{className:v.navigation,children:[(0,f.jsxs)("ul",{className:b.Z.nav,children:[(0,f.jsx)("li",{className:b.Z.navItem,children:(0,f.jsxs)(s.OL,{to:"home",className:b.Z.navLink,activeclassname:b.Z.navLinkActive,children:[(0,f.jsx)("div",{className:b.Z.iconWrapper,children:(0,f.jsx)("svg",{className:b.Z.svg,children:(0,f.jsx)("use",{href:"".concat(j.Z,"#icon-home")})})}),(0,f.jsx)("span",{className:b.Z.navText,children:"Home"})]})}),(0,f.jsx)("li",{className:b.Z.navItem,children:(0,f.jsxs)(s.OL,{to:"diagram",className:b.Z.navLink,activeclassname:b.Z.navLinkActive,children:[(0,f.jsx)("div",{className:b.Z.iconWrapper,children:(0,f.jsx)("svg",{className:b.Z.svg,children:(0,f.jsx)("use",{href:"".concat(j.Z,"#icon-statistic")})})}),(0,f.jsx)("span",{className:b.Z.navText,children:"Statistics"})]})}),(0,f.jsx)(p.Z,{queries:I,children:function(a){return(a.mobile||a.response)&&(0,f.jsx)("li",{className:b.Z.navItem,children:(0,f.jsx)(s.OL,{to:"currency",className:b.Z.navLink,activeclassname:b.Z.navLinkActive,children:(0,f.jsx)("div",{className:b.Z.iconWrapper,children:(0,f.jsx)("svg",{className:b.Z.svg,children:(0,f.jsx)("use",{href:"".concat(j.Z,"#icon-currency")})})})})})}})]}),(0,f.jsx)("div",{className:v.balance,children:"/wallet/currency"!==t&&(0,f.jsx)(x,{})})]}),(0,f.jsxs)("div",{className:v.currency,children:[(0,f.jsx)(p.Z,{queries:I,children:function(a){return(a.tablet||a.desktop)&&(0,f.jsx)(c.F,{})}}),(0,f.jsx)(p.Z,{queries:I,children:function(a){return(a.tablet||a.desktop)&&"/wallet/currency"===t&&(0,f.jsx)(r.Fg,{to:"/wallet/home"})}})]})]}),(0,f.jsx)("div",{className:v.content,children:(0,f.jsx)(e.Suspense,{children:(0,f.jsx)(r.j3,{})})})]}),(0,f.jsx)(p.Z,{queries:I,children:function(a){return(a.tablet||a.desktop)&&o&&(0,f.jsx)(y,{})}}),(0,f.jsx)(p.Z,{queries:I,children:function(n){return(n.mobile||n.response)&&o&&!a&&(0,f.jsx)(y,{})}})]})}},9104:function(a,n,t){t.d(n,{Yh:function(){return c},ig:function(){return e},us:function(){return s},zh:function(){return r}});var e=function(a){return a.transactions.transactions},s=function(a){return a.transactions.categories},r=function(a){return a.transactions.error},c=function(a){return a.transactions.isTransactionModalOpen}}}]);
//# sourceMappingURL=218.c2b6da75.chunk.js.map