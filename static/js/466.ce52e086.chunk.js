"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[466],{5466:function(a,t,e){e.r(t),e.d(t,{default:function(){return C}});var n=e(2982),s=e(2791),c=e(9434),r=e(3868),l=e(9831),o=e(1951),i=e(9085),d=(e(5462),e(8880)),u=function(a){return a.transactions.transactions},m=function(a){return a.transactions.categories},h=function(a){return a.transactions.error},b=function(a){return a.transactions.isTransactionModalOpen},x=e(2142),_=e(885),p=e(5705),f=e(9513),D=e.n(f),j=e(1724),g=(e(8639),e(365));var y=e.p+"static/media/transactionSprite.f81084fa89e2f71405e24f42db60dd15.svg",v=e(184),N=(0,s.forwardRef)((function(a,t){var e=a.value,n=a.onClick;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("input",{value:e,className:g.Z.customDateInput,onClick:n,onChange:n,ref:t,required:!0}),(0,v.jsx)("svg",{className:g.Z.calendarIcon,width:18,height:20,onClick:n,children:(0,v.jsx)("use",{href:y+"#icon-calendar"})})]})}));function T(){var a=(0,s.useState)(new Date),t=(0,_.Z)(a,2),e=t[0],n=t[1],r=(0,c.I0)();(0,s.useEffect)((function(){r((0,d.CP)())}),[r]),(0,s.useEffect)((function(){var a=function(a){"Escape"===a.code&&r((0,x.$)())};return document.addEventListener("keydown",a),function(){return document.removeEventListener("keydown",a)}}),[r]);var l=(0,c.v9)(m),o=(0,p.TA)({initialValues:{type:!0,amount:"",comment:"",categoryId:""},validationSchema:j.Ry({type:j.Xg(),amount:j.Rx().required("Required"),comment:j.Z_().max(40,"40 characters max"),categoryId:j.Z_().required("Required")}),onSubmit:function(a){var t=a.categoryId,n=a.type,s=a.amount,c=a.comment,l={transactionDate:e,comment:c,categoryId:n?t:"063f1132-ba5d-42b4-951d-44011ca46262",amount:n?-1*Number(s):Number(s),type:n?"EXPENSE":"INCOME"};r((0,d.dT)(l)),r((0,x.$)())}}),i=o.handleChange,u=o.handleSubmit,h=o.values,b=o.errors,f=o.touched;return(0,v.jsx)("div",{className:g.Z.backdrop,onClick:function(a){a.target===a.currentTarget&&r((0,x.$)())},children:(0,v.jsxs)("div",{className:g.Z.modal,children:[(0,v.jsx)("button",{className:g.Z.closeBtn,onClick:function(){return r((0,x.$)())},type:"button","aria-label":"close button"}),(0,v.jsxs)("form",{className:g.Z.modalForm,onSubmit:u,children:[(0,v.jsx)("h2",{className:g.Z.modalTitle,children:"Add transaction"}),(0,v.jsxs)("div",{className:g.Z.typeWrapper,children:[(0,v.jsx)("div",{className:h.type?g.Z.inactive:g.Z.income,children:"Income"}),(0,v.jsxs)("label",{className:g.Z.typeLabel,children:[(0,v.jsx)("input",{className:g.Z.typeCheckbox,name:"type",type:"checkbox",checked:h.type,onChange:i}),(0,v.jsx)("div",{className:g.Z.customCheckbox})]}),(0,v.jsx)("div",{className:h.type?g.Z.expense:g.Z.inactive,children:"Expense"})]}),h.type&&(0,v.jsxs)("select",{className:g.Z.select,name:"categoryId",value:h.categoryId,onChange:i,required:!0,children:[(0,v.jsx)("option",{className:g.Z.selectPlaceholder,value:"",disabled:!0,hidden:!0,children:"Select your option"}),l.map((function(a){return"EXPENSE"===a.type?(0,v.jsx)("option",{value:a.id,children:a.name},a.id):null}))]}),f.categoryId&&b.categoryId?(0,v.jsx)("div",{children:b.categoryId}):null,(0,v.jsxs)("div",{className:g.Z.amountAndDate,children:[(0,v.jsx)("input",{className:g.Z.amountInput,name:"amount",type:"text",placeholder:"0.00",value:h.amount,onChange:i,required:!0}),f.amount&&b.amount?(0,v.jsx)("div",{children:b.amount}):null,(0,v.jsx)(D(),{selected:e,dateFormat:"dd.MM.yyyy",calendarStartDay:1,onChange:n,customInput:(0,v.jsx)(N,{})})]}),(0,v.jsx)("input",{className:g.Z.commentInput,name:"comment",type:"text",placeholder:"Comment",value:h.comment,onChange:i}),f.comment&&b.comment?(0,v.jsx)("div",{children:b.comment}):null,(0,v.jsxs)("div",{className:g.Z.btnWrapper,children:[(0,v.jsx)("button",{className:g.Z.addBtn,type:"submit",children:"Add"}),(0,v.jsx)("button",{className:g.Z.cancelBtn,type:"button",onClick:function(){return r((0,x.$)())},children:"Cancel"})]})]})]})})}var Z={transactions:"Transactions_transactions__71ga-",transactionsTable:"Transactions_transactionsTable__dtPaD",tableHeader:"Transactions_tableHeader__Cpqjv",tableHeaderData:"Transactions_tableHeaderData__mZexS",tableHeaderDataRight:"Transactions_tableHeaderDataRight__gujHp Transactions_tableHeaderData__mZexS",tableBody:"Transactions_tableBody__mnCJO",tableData:"Transactions_tableData__i3g3I",firstTableData:"Transactions_firstTableData__hSLhT",lastTableData:"Transactions_lastTableData__YuN01",tableDataRight:"Transactions_tableDataRight__k5pQt Transactions_tableData__i3g3I",tableDataIncome:"Transactions_tableDataIncome__YKGXQ Transactions_tableDataRight__k5pQt Transactions_tableData__i3g3I",tableDataExpense:"Transactions_tableDataExpense__X6kvt Transactions_tableDataRight__k5pQt Transactions_tableData__i3g3I",addButton:"Transactions_addButton__cRmgL"},C=function(){var a=(0,c.v9)(b),t=(0,c.v9)(m),e=(0,c.v9)(u),_=(0,c.v9)(h),p=(0,c.I0)();(0,s.useEffect)((function(){p((0,d.CP)())}),[p]);var f=(0,n.Z)(e).sort((function(a,t){return(0,r.Z)((0,l.default)(a.transactionDate),(0,l.default)(t.transactionDate))}));return _&&i.Am.error(_),(0,v.jsxs)("section",{className:Z.transactions,children:[(0,v.jsxs)("table",{className:Z.transactionsTable,children:[(0,v.jsx)("thead",{className:Z.tableHeader,children:(0,v.jsxs)("tr",{className:Z.tableHeaderRow,children:[(0,v.jsx)("th",{className:Z.tableHeaderData,children:"Date"}),(0,v.jsx)("th",{className:Z.tableHeaderData,children:"Type"}),(0,v.jsx)("th",{className:Z.tableHeaderData,children:"Category"}),(0,v.jsx)("th",{className:Z.tableHeaderData,children:"Comment"}),(0,v.jsx)("th",{className:Z.tableHeaderDataRight,children:"Sum"}),(0,v.jsx)("th",{className:Z.tableHeaderDataRight,children:"Balance"})]})}),(0,v.jsx)("tbody",{className:Z.tableBody,children:f.map((function(a,e,n){var s,c=a.id,r=a.transactionDate,i=a.type,d=a.categoryId,u=a.comment,m=a.amount,h=a.balanceAfter;return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{className:"".concat(Z.tableData," ").concat(0===e&&Z.firstTableData," ").concat(e===n.length-1&&Z.lastTableData),children:(0,o.default)((0,l.default)(r),"dd.MM.yyyy")}),(0,v.jsx)("td",{className:"".concat(Z.tableData," ").concat(0===e&&Z.firstTableData," ").concat(e===n.length-1&&Z.lastTableData),children:"INCOME"===i?"+":"-"}),(0,v.jsx)("td",{className:"".concat(Z.tableData," ").concat(0===e&&Z.firstTableData," ").concat(e===n.length-1&&Z.lastTableData),children:null===(s=t.find((function(a){return a.id===d})))||void 0===s?void 0:s.name}),(0,v.jsx)("td",{className:"".concat(Z.tableData," ").concat(0===e&&Z.firstTableData," ").concat(e===n.length-1&&Z.lastTableData),children:u}),(0,v.jsx)("td",{className:"".concat("INCOME"===i?Z.tableDataIncome:Z.tableDataExpense," ").concat(0===e&&Z.firstTableData," ").concat(e===n.length-1&&Z.lastTableData),children:Math.abs(m)}),(0,v.jsx)("td",{className:"".concat(Z.tableDataRight," ").concat(0===e&&Z.firstTableData," ").concat(e===n.length-1&&Z.lastTableData),children:h})]},c)}))})]}),(0,v.jsx)("button",{type:"button",className:Z.addButton,"aria-label":"add transaction button",onClick:function(){return p((0,x.$)())},children:(0,v.jsx)("svg",{width:20,height:20,children:(0,v.jsx)("use",{href:y+"#icon-plus"})})}),a&&(0,v.jsx)(T,{}),(0,v.jsx)(i.Ix,{})]})}}}]);
//# sourceMappingURL=466.ce52e086.chunk.js.map